# Clean-RS 使用指南

## 快速开始

### 方式一：双击运行（Windows 最简单）
1. 双击 `clean.bat` 文件
2. 使用 TUI 界面进行清理
3. 完成后按任意键退出

### 方式二：命令行运行

#### TUI 模式（推荐）
```bash
# Windows
clean-rs.exe --tui

# Linux/Mac
./clean-rs --tui
```

#### CLI 模式
```bash
# 清理临时文件
clean-rs --temp

# 清理回收站（仅 Windows）
clean-rs --recycle

# 清理自定义目录
clean-rs --directory "C:\path\to\directory"

# 预览模式（不实际删除）
clean-rs --dry-run

# 详细输出
clean-rs --verbose

# 静默模式
clean-rs --quiet
```

## TUI 界面详细说明

### 界面布局
```
┌─────────────────────────────────────────┐
│            Clean-RS 系统清理工具          │
│          选择要清理的项目...              │
├─────────────────────────────────────────┤
│ ┌─────────────────────────────────────┐ │
│ │  清理项目 (SPACE 选择, ENTER 扫描)   │ │
│ │                                     │ │
│ │  [✓] 临时文件目录                    │ │
│ │  [✓] Windows Prefetch               │ │
│ │  [ ] Chrome 缓存                    │ │
│ │  [ ] VS Code 缓存                   │ │
│ │  [ ] Cargo 缓存                     │ │
│ │  [✓] 日志文件                       │ │
│ │  ...                                │ │
│ └─────────────────────────────────────┘ │
├─────────────────────────────────────────┤
│    按 SPACE 选择/取消选择, ENTER 扫描   │
└─────────────────────────────────────────┘
```

### 操作流程

#### 第一步：选择清理项目
1. 使用 **↑/↓** 或 **j/k** 键导航
2. 按 **SPACE** 键切换选择状态
3. 建议禁用浏览器缓存、VS Code 缓存（这些可能影响性能）

#### 第二步：扫描预览
1. 按 **ENTER** 键开始扫描
2. 等待扫描完成
3. 查看每个项目的文件数量和大小
4. 确认要清理的数据量

#### 第三步：执行清理
1. 按 **C** 键执行清理
2. 等待清理完成
3. 查看释放的磁盘空间

#### 其他操作
- **R** - 重置，重新开始
- **Q** - 退出程序

## 清理项目详解

### 推荐清理（默认启用）

#### 1. 临时文件目录
- **位置**: `%TEMP%` (通常是 `C:\Users\<用户名>\AppData\Local\Temp`)
- **内容**: 系统和应用程序的临时文件
- **安全性**: 完全安全，可以随时清理
- **频率**: 建议每月清理一次

#### 2. Windows Prefetch
- **位置**: `C:\Windows\Prefetch`
- **内容**: Windows 预读文件，用于加速程序启动
- **安全性**: 安全，清理后 Windows 会自动重建
- **频率**: 建议 2-3 个月清理一次
- **注意**: 清理后第一次启动程序可能会稍慢

#### 3. 日志文件
- **位置**: 临时目录中的 `.log` 文件
- **内容**: 应用程序和系统的日志文件
- **安全性**: 安全，旧日志通常无用
- **频率**: 建议 1-2 个月清理一次

### 可选清理（默认禁用）

#### 4. Chrome 缓存
- **位置**: `%LOCALAPPDATA%\Google\Chrome\User Data\Default\Cache`
- **内容**: Chrome 浏览器的缓存文件
- **安全性**: 安全，但会减慢网页首次加载速度
- **频率**: 建议谨慎清理，仅在磁盘空间不足时清理
- **注意**: 清理后需要重新加载网页

#### 5. VS Code 缓存
- **位置**: `%APPDATA%\Code\Cache`
- **内容**: Visual Studio Code 的缓存文件
- **安全性**: 安全，但可能影响 VS Code 性能
- **频率**: 建议 3-6 个月清理一次

#### 6. Cargo 缓存
- **位置**: `%USERPROFILE%\.cargo\registry\cache`
- **内容**: Rust Cargo 包管理器下载的包缓存
- **安全性**: 安全，但会重新下载包
- **频率**: 建议 6 个月清理一次
- **注意**: 清理后编译项目需要重新下载依赖

#### 7. NPM 缓存
- **位置**: `%APPDATA%\npm-cache` 或 `%LOCALAPPDATA%\npm-cache`
- **内容**: Node.js NPM 包管理器缓存
- **安全性**: 安全，但会重新下载包
- **频率**: 建议 6 个月清理一次

#### 8. 缩略图缓存
- **位置**: `%LOCALAPPDATA%\Microsoft\Windows\Explorer`
- **内容**: 文件缩略图缓存
- **安全性**: 安全，但会重新生成缩略图
- **频率**: 建议 3 个月清理一次
- **注意**: 清理后打开文件夹需要重新生成缩略图

#### 9. 最近文档
- **位置**: `%APPDATA%\Microsoft\Windows\Recent`
- **内容**: 最近访问的文档快捷方式
- **安全性**: 安全，不影响实际文件
- **频率**: 随时清理
- **注意**: 清理后"最近使用的文件"列表会清空

## 常见问题

### Q: 清理会删除我的重要文件吗？
**A:** 不会。程序只清理缓存文件、临时文件等系统垃圾数据，不会删除用户文档。

### Q: 为什么有些文件删除失败？
**A:** 某些文件可能正在被其他程序使用，这是正常现象。程序会静默忽略这些文件，不影响清理效果。

### Q: 为什么清理后大小显示为 0？
**A:** 这个问题在 v0.3.0 中已修复。如果仍然出现，请确保您使用的是最新版本。

### Q: 可以清理正在使用程序的下载目录吗？
**A:** 不建议。最好关闭所有正在运行的程序后再进行清理。

### Q: 清理后系统会变慢吗？
**A:** 不会。反而在某些情况下会更快，因为减少了系统扫描缓存的负担。预读文件重建后性能会恢复正常。

### Q: 频率多久清理一次合适？
**A:** 建议：
- 临时文件：每月一次
- Prefetch：2-3 个月一次
- 日志文件：1-2 个月一次
- 其他缓存：根据磁盘空间情况决定

### Q: 双击 .exe 文件后窗口立即关闭怎么办？
**A:** 使用 `--pause` 参数或双击 `clean.bat` 文件，这样程序结束后会等待按键。

## 高级用法

### 创建快捷清理脚本
创建 `quick_clean.bat`：
```batch
@echo off
clean-rs.exe --temp --recycle --quiet
pause
```

### 定时清理（Windows 任务计划程序）
1. 打开"任务计划程序"
2. 创建基本任务
3. 设置触发器（例如每月1日）
4. 操作：启动程序，选择 `clean-rs.exe`，参数：`--temp --quiet`

### 仅预览不清理
```bash
clean-rs --dry-run --verbose
```

## 故障排除

### TUI 界面显示异常
- 确保终端支持 UTF-8
- 尝试使用 CMD 或 PowerShell
- Windows: 运行 `chcp 65001` 设置编码

### 权限不足
- 以管理员身份运行程序
- 某些系统目录可能需要管理员权限

### 找不到可执行文件
- 确保 `cargo build --release` 已执行
- 检查 `target/release/` 目录

## 最佳实践

1. **定期清理** - 建议每月清理一次临时文件
2. **选择性清理** - 不要启用所有项目，选择合适的清理项目
3. **先扫描后清理** - 使用 TUI 模式先预览数据量
4. **关闭程序** - 清理前关闭正在运行的程序
5. **备份数据** - 虽然程序不会删除用户数据，但养成备份习惯总是好的

## 技术支持

如遇到问题，请：
1. 查看本使用指南
2. 使用 `--verbose` 参数查看详细日志
3. 在 GitHub 提交 Issue