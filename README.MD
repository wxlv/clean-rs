# Clean-RS

一个功能强大的 Rust 系统清理工具，现在支持 TUI（终端用户界面）界面！

## ✨ 新功能 (v0.3.0)

### 🖥️ TUI 界面
- 全新的交互式终端界面
- 可视化查看所有清理项目
- 扫描前预览每个项目的垃圾数据
- 实时显示文件大小和数量统计
- 直观的勾选/取消选择操作

### 🧹 更多清理项目
现在支持清理以下类型的数据：

1. **临时文件目录** - 系统临时文件
2. **Windows Prefetch** - Windows 预读文件缓存
3. **Chrome 缓存** - Chrome 浏览器缓存文件
4. **VS Code 缓存** - Visual Studio Code 缓存
5. **Cargo 缓存** - Rust Cargo 包管理器缓存
6. **NPM 缓存** - Node.js NPM 包管理器缓存
7. **日志文件** - 临时目录中的日志文件
8. **缩略图缓存** - Windows 文件缩略图缓存
9. **最近文档** - Windows 最近访问的文档列表

### 🔧 问题修复
- ✅ **静默错误处理** - 无法删除的文件不再显示错误警告
- ✅ **防止控制台闪烁** - 双击运行 release 版本时不会一闪而过（使用 `--pause` 参数）
- ✅ **修复大小统计** - 正确显示被清理文件的大小，不再是 0.0

## 📦 安装

### 编译
```bash
cargo build --release
```

编译后的可执行文件位于 `target/release/clean-rs.exe` (Windows) 或 `target/release/clean-rs` (Linux/Mac)

## 🚀 使用方法

### TUI 模式（推荐）
启动交互式图形界面：

```bash
clean-rs --tui
```

#### TUI 操作说明
- **↑/↓ 或 j/k** - 在项目列表中导航
- **SPACE** - 选择/取消选择要清理的项目
- **ENTER** - 扫描选中的项目，查看垃圾数据统计
- **C** - 执行清理操作（扫描完成后可使用）
- **R** - 重置，重新开始
- **Q** - 退出程序

### CLI 模式
传统的命令行模式，保持向后兼容：

```bash
# 清理所有默认项目
clean-rs

# 只清理临时文件
clean-rs --temp

# 只清理回收站（Windows）
clean-rs --recycle

# 清理自定义目录
clean-rs --directory "C:\path\to\directory"

# 预览模式（不实际删除）
clean-rs --dry-run

# 详细输出
clean-rs --verbose

# 静默模式（只显示错误）
clean-rs --quiet

# 防止控制台关闭（Windows 双击运行后有用）
clean-rs --pause
```

## 📖 功能详解

### 扫描阶段
在选择清理项目后，程序会扫描每个项目：
- 统计文件数量
- 计算占用的磁盘空间（MB）
- 显示详细的扫描结果

### 清理阶段
在扫描完成后：
- 查看清理前的大小统计
- 确认无误后按 `C` 执行清理
- 静默处理无法删除的文件（不提示错误）
- 显示清理后释放的空间

### 最佳实践清理项目
程序默认启用以下项目（推荐清理）：
- ✅ 临时文件目录
- ✅ Windows Prefetch
- ✅ 日志文件

以下项目默认禁用（可选清理）：
- Chrome 缓存
- VS Code 缓存
- Cargo 缓存
- NPM 缓存
- 缩略图缓存
- 最近文档

## 🔒 安全特性

- **预览模式** - 清理前可以先扫描查看
- **静默失败** - 无法删除的文件不会导致程序报错
- **选择性清理** - 可以只选择需要的项目进行清理
- **确认机制** - 需要明确按下 `C` 才会执行清理

## 🎯 使用场景

### 1. 日常系统维护
```bash
# 使用 TUI 模式，选择推荐项目
clean-rs --tui
```

### 2. 快速清理
```bash
# CLI 模式快速清理临时文件
clean-rs --temp
```

### 3. 预览清理
```bash
# 先查看会清理多少数据，再决定是否执行
clean-rs --tui
# 按 ENTER 扫描，然后按 R 重置退出
```

### 4. 双击运行（Windows）
创建批处理文件 `clean.bat`：
```batch
@echo off
clean-rs.exe --tui --pause
```

## 🛠️ 开发

### 运行测试
```bash
cargo test
```

### 运行
```bash
cargo run -- --tui
```

## 📄 许可证

MIT License

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

## 📝 更新日志

### v0.3.0
- 新增 TUI 交互式界面
- 新增 8 种清理项目
- 修复文件大小统计问题
- 修复控制台闪退问题
- 实现静默错误处理
- 支持清理前预览

### v0.2.0
- 基础清理功能
- 支持临时文件和回收站清理

## 🙏 致谢

感谢所有为此项目做出贡献的开发者！